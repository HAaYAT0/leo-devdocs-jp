---
id: core_architecture 
title: コアアーキテクチャ
sidebar_label: コアアーキテクチャ
---
Aleo は「許可不要でプライベートなプログラマビリティ」を重視しており、誰もが他者の許可なく任意のロジックを Aleo ブロックチェーン上に実装できることを意味します。この性質は次の 2 つの主要コンポーネントによって実現されています。

1. [**SnarkVM (AleoVM)**](./snarkvm.md): Aleo のオフチェーン実行環境であり、仮想マシンとして機能します。SnarkVM は AleoVM と同義で、Aleo プログラムの実行とゼロ知識証明の生成を可能にします。SnarkVM と暗号化を組み合わせることで、誰もがプライバシーを保ったままロジックを実行できます。

2. [**SnarkOS**](./snarkos.md): Aleo のブロックチェーンノードクライアントで、AleoBFT コンセンサスメカニズムを採用しています。SnarkOS は AleoBFT プロトコルを実装し、ネットワーク参加者間で安全かつ効率的にコンセンサスを形成します。

これら 2 つのコンポーネントが相互補完的に機能し、SnarkVM がゼロ知識のオフチェーン実行を担い、SnarkOS がネットワーククライアントとして提出されたゼロ知識証明（zk-SNARK）を検証し、オフチェーン計算の正当性を確認します。

このアーキテクチャによって、以下の主要な機能が実現されます。
- **ユーザー向け**: オフチェーン計算とゼロ知識証明を活用しながら、Aleo 上の分散型アプリケーション（プログラム）とやり取りしてもデータのプライバシーを維持できる
- **開発者向け**: Leo プログラミング言語や Aleo instructions を用いてプライバシー保護された分散型アプリケーションを開発し、ネットワークにデプロイできる

これらのコンポーネントの詳細は、SnarkVM と SnarkOS を詳説した[仕様](../specifications.md)セクションを参照してください。

## Aleo Roadmap

Aleo はプライバシー、スケーラビリティ、ユーザビリティを高めるために継続的にプロトコルを改善しています。ロードマップでは、ネットワークインフラの強化、新機能の導入、パフォーマンスの最適化を目指す主要な取り組みやプロジェクトを紹介しています。ロードマップを追うことで、開発者とユーザーは今後のリリース情報を把握し、Aleo エコシステムの進化に参加できます。

最新の開発状況や今後のマイルストーンについては、公式の [Aleo Roadmap](https://aleo.org/roadmap/) をご確認ください。

## Aleo を許可不要・プライベート・プログラマブルにしているもの

Aleo のネットワークアーキテクチャを俯瞰することで、学習セクションで紹介した概念の理解が深まります。

![overview](./images/overview.png)


図に示した各要素が相互に作用することで、許可不要のプログラマブルなプライバシーが実現されています。

## Components

### User
**ユーザー**は入力を準備し、自身の操作に対するゼロ知識証明（ZKP）を生成することで秘匿トランザクションを開始します。証明はローカルで生成することも、効率化のために**第三者プローバー**へ委任することもできます。

### Proof Generation
ユーザー（または第三者）がトランザクションのゼロ知識証明を計算するプロセスです。証明生成には以下の方法があります。
- **ユーザー自身がローカルで実行** — 自身のデバイスで処理します。
- **第三者プローバーへ委任** — ウォレットプロバイダなどがユーザーに代わって計算負荷を引き受けます。委任は任意であり、認可／署名と証明生成が分離されているため、ユーザーデータのプライバシーは損なわれません。

### Third Party Prover
**第三者プローバー**は、ユーザーが証明生成を任意で委任できる外部サービスです。必要なデータを受け取って証明を生成し、提出用にユーザーへ返却します。特に計算資源が限られるユーザーにとって効率化につながります。

### Client
**クライアント**はユーザーと Aleo ネットワークをつなぐインターフェースです。ユーザーから（RPC を通じて）証明とトランザクションデータを受け取り、ネットワークへ送信します。また、ネットワークから新しいブロックやデータを受信し、必要な情報をユーザーへ返します。

### Prover (Miner)
**プローバー**（「マイナー」と呼ばれることもあります）は、コインベースパズルの SNARK 証明を生成するネットワーク参加者です。主な役割は証明生成の効率を高め、トランザクションの承認時間短縮やユーザー体験の向上につなげることです。プローバーはコンセンサスプロセスには関与せず、暗号パズルを解くための計算資源を提供し、解をバリデータへ提出することで**コインベース報酬を獲得**します。

### Validators
**バリデータ**は提出されたゼロ知識証明を検証し、AleoBFT プロトコルを用いてコンセンサスを維持します。主な責務は次のとおりです。
- **証明検証**: トランザクションに添付された証明の正当性を確認する。
- **コンセンサス**: ビザンチン耐性を備えた AleoBFT に参加し、次のブロックに合意する。
- **台帳保存**: 検証済みトランザクションを新しいブロックとして台帳に記録する。

バリデータは複数存在し（バリデータ 1、バリデータ 2、…、バリデータ n）、連携してネットワークの完全性と安全性を確保します。

### Ledger (Data Storage)
**台帳（Ledger）**はブロックチェーンのデータストレージ層であり、検証済みのトランザクションとブロックを保存してネットワーク上のすべての活動を改ざん不能かつ公開検証可能な形で記録します。

## User flow of executing a Private Transaction

1. ユーザーが入力を準備する。

2. ノードからプログラムを取得する。

3. 取得したプログラムの必要な関数を snarkvm でローカル実行する。

4. 出力された証明結果と入力・出力をクライアントノードへブロードキャストする。秘匿実行の場合、入力と出力は暗号化される。

5. バリデータが証明を検証し、コンセンサスが形成される。

6. トランザクションが検証されると、新しいブロックとして台帳に記録される。

7. これでトランザクションが完全に完了する。
